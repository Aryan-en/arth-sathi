<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GraminSahayak - Financial Literacy for Rural India</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        primary: '#ea580c', // Orange-600
                        secondary: '#16a34a', // Green-600
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="style.css">
    <style>
        --- CUSTOM STYLES ---
        :root {
            --glass-bg: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
        }

        body {
            overflow-x: hidden;
        }

        /* Rich Background */
        .bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(to bottom right, rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.3)),
                url('https://images.unsplash.com/photo-1623153549247-494b299a9a38?q=80&w=2070&auto=format&fit=crop'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            z-index: -1;
        }

        /* Glassmorphism Utilities */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--glass-shadow);
        }

        .glass-nav {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Animations */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 4s ease-in-out infinite;
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .animate-enter {
            animation: fadeInScale 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* Mic Pulse */
        .mic-active {
            animation: pulse-red 1.5s infinite;
            background-color: #fee2e2 !important;
            color: #ef4444 !important;
            border-color: #fca5a5 !important;
        }
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
    </style>
</head>
<body class="text-slate-800 antialiased selection:bg-orange-200 selection:text-orange-900">

    <!-- Background Image -->
    <div class="bg-container"></div>

    <!-- Navigation -->
    <nav class="glass-nav fixed w-full z-50 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <div class="flex-shrink-0 flex items-center gap-3 cursor-pointer group" onclick="showLanding()">
                    <div class="bg-orange-100 p-2 rounded-lg group-hover:bg-orange-200 transition">
                        <i class="fas fa-seedling text-2xl text-primary"></i>
                    </div>
                    <span class="font-bold text-2xl tracking-tight text-slate-800">Gramin<span class="text-primary">Sahayak</span></span>
                </div>
                
                <div class="hidden md:flex items-center space-x-6">
                    <button onclick="showLanding()" class="text-slate-600 hover:text-primary font-medium transition">Home</button>
                    <button onclick="launchApp('translator')" class="text-slate-600 hover:text-primary font-medium transition">Translator</button>
                    <button onclick="launchApp('chatbot')" class="text-slate-600 hover:text-primary font-medium transition">Sahayak Bot</button>
                    <button onclick="launchApp('blog')" class="text-slate-600 hover:text-primary font-medium transition">Blog</button>
                    <button onclick="launchApp('ledger')" class="text-slate-600 hover:text-primary font-medium transition flex items-center gap-1"><i class="fas fa-calculator text-xs"></i> Ledger</button>
                    <button onclick="toggleModal('loginModal')" class="bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-2.5 rounded-full font-semibold shadow-lg hover:shadow-orange-500/30 hover:-translate-y-0.5 transition-all duration-300">
                        Login
                    </button>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button class="text-slate-600 hover:text-primary text-2xl"><i class="fas fa-bars"></i></button>
                </div>
            </div>
        </div>
    </nav>

    <!-- === LANDING PAGE SECTION === -->
    <section id="landing-page" class="min-h-screen flex flex-col justify-center items-center text-center pt-24 px-4 pb-12">
        <div class="max-w-6xl mx-auto animate-enter">
            <div class="inline-block bg-white/20 backdrop-blur-md border border-white/30 rounded-full px-4 py-1.5 text-white text-sm font-medium mb-6">
                âœ¨ Empowering Rural India with AI
            </div>
            <h1 class="text-5xl md:text-7xl font-bold text-white mb-6 leading-tight drop-shadow-lg">
                Financial Freedom <br> in <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-300 to-yellow-300">Your Language</span>
            </h1>
            <p class="text-lg md:text-2xl text-slate-100 mb-10 max-w-2xl mx-auto font-light leading-relaxed drop-shadow-md">
                Break the barrier. Master your finances. <br>
                Instant translation, AI advice, and Expense Tracking.
            </p>
            
            <div class="flex flex-wrap justify-center gap-5 mb-20">
                <button onclick="launchApp('translator')" class="bg-white text-primary px-8 py-4 rounded-xl font-bold text-lg shadow-xl hover:shadow-2xl hover:bg-slate-50 transform hover:-translate-y-1 transition-all duration-300 flex items-center gap-3">
                    <i class="fas fa-rocket"></i> Launch App
                </button>
                <button onclick="toggleModal('loginModal')" class="bg-white/10 backdrop-blur-md border border-white/40 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-white/20 transform hover:-translate-y-1 transition-all duration-300">
                    User Login
                </button>
            </div>

            <!-- Feature Cards -->
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-left">
                <!-- Card 1 -->
                <div class="glass-panel p-6 rounded-3xl hover:bg-white/90 transition duration-300 cursor-pointer group" onclick="launchApp('translator')">
                    <div class="w-12 h-12 bg-green-100 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition duration-300">
                        <i class="fas fa-language text-xl text-green-600"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Voice Translator</h3>
                    <p class="text-slate-600 text-sm">Instant translations for banking terms in your dialect.</p>
                </div>

                <!-- Card 2 -->
                <div class="glass-panel p-6 rounded-3xl hover:bg-white/90 transition duration-300 cursor-pointer group" onclick="launchApp('chatbot')">
                    <div class="w-12 h-12 bg-blue-100 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition duration-300">
                        <i class="fas fa-robot text-xl text-blue-600"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Sahayak Bot</h3>
                    <p class="text-slate-600 text-sm">24/7 AI financial assistant for loans and schemes.</p>
                </div>

                <!-- Card 3 -->
                <div class="glass-panel p-6 rounded-3xl hover:bg-white/90 transition duration-300 cursor-pointer group" onclick="launchApp('blog')">
                    <div class="w-12 h-12 bg-purple-100 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition duration-300">
                        <i class="fas fa-book-reader text-xl text-purple-600"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Literacy Blog</h3>
                    <p class="text-slate-600 text-sm">Learn money management with simple guides.</p>
                </div>

                <!-- Card 4 (Ledger) -->
                <div class="glass-panel p-6 rounded-3xl hover:bg-white/90 transition duration-300 cursor-pointer group" onclick="launchApp('ledger')">
                    <div class="w-12 h-12 bg-orange-100 rounded-2xl flex items-center justify-center mb-4 group-hover:scale-110 transition duration-300">
                        <i class="fas fa-calculator text-xl text-orange-600"></i>
                    </div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">Expense Ledger</h3>
                    <p class="text-slate-600 text-sm">Track your daily farming expenses and savings easily.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- === APP INTERFACE SECTION (Hidden by default) === -->
    <section id="app-interface" class="hidden min-h-screen pt-28 pb-10 px-4 md:px-6">
        <div class="max-w-5xl mx-auto bg-white/95 backdrop-blur-xl rounded-[2.5rem] shadow-2xl overflow-hidden min-h-[650px] flex flex-col border border-white/50 animate-enter ring-1 ring-black/5">
            
            <!-- App Header -->
            <div id="app-header" class="bg-gradient-to-r from-orange-600 to-red-600 p-5 md:p-6 text-white flex flex-col md:flex-row justify-between items-center gap-4 transition-colors duration-500">
                
                <div class="flex items-center gap-4 w-full md:w-auto">
                    <!-- Back Button -->
                    <button onclick="showLanding()" class="bg-white/20 hover:bg-white/30 p-2.5 rounded-xl transition backdrop-blur-sm group" title="Back to Home">
                        <i class="fas fa-arrow-left group-hover:-translate-x-1 transition-transform"></i>
                    </button>

                    <div class="flex items-center gap-4">
                        <div class="bg-white/20 p-2.5 rounded-xl backdrop-blur-sm shadow-inner"><i class="fas fa-leaf text-xl text-yellow-300"></i></div>
                        <div>
                            <h2 class="text-2xl font-bold tracking-tight">GraminSahayak</h2>
                            <div class="flex items-center gap-2">
                                <span class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                                <p class="text-xs font-medium text-orange-100" id="ai-status">Checking Connection...</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="flex gap-3 items-center bg-black/10 p-1.5 rounded-2xl backdrop-blur-sm">
                    <!-- Language Selector -->
                    <div class="relative">
                        <select id="language-select" onchange="changeLanguage()" class="appearance-none bg-transparent hover:bg-white/10 text-white rounded-xl py-2 pl-4 pr-10 font-semibold cursor-pointer focus:outline-none w-40 text-sm">
                            <option value="haryanvi" class="text-slate-900">Haryanvi</option>
                            <option value="bhojpuri" class="text-slate-900">Bhojpuri</option>
                            <option value="tamil" class="text-slate-900">Tamil</option>
                        </select>
                        <i class="fas fa-chevron-down absolute right-3 top-2.5 text-xs pointer-events-none opacity-70"></i>
                    </div>
                </div>
            </div>

            <!-- TRANSLATOR VIEW -->
            <div id="view-translator" class="flex-1 flex flex-col hidden">
                <div class="flex-1 grid md:grid-cols-2">
                    <!-- Input Area -->
                    <div class="p-6 md:p-8 flex flex-col border-b md:border-b-0 md:border-r border-slate-100">
                        <div class="flex justify-between mb-4">
                            <span id="label-source" class="text-xs font-bold uppercase tracking-wider text-slate-400 bg-slate-100 px-3 py-1 rounded-full">English</span>
                            <button onclick="toggleDirection()" class="text-slate-400 hover:text-primary transition p-1"><i class="fas fa-exchange-alt"></i></button>
                            <span id="label-target" class="text-xs font-bold uppercase tracking-wider text-primary bg-orange-50 px-3 py-1 rounded-full">Haryanvi</span>
                        </div>
                        <textarea id="input-text" class="w-full flex-1 resize-none text-2xl font-light border-none focus:ring-0 outline-none placeholder-slate-300 bg-transparent leading-relaxed" placeholder="Type here..."></textarea>
                        <div class="flex justify-between items-center mt-6">
                            <button id="mic-translator" onclick="startVoiceTranslation()" class="w-12 h-12 flex items-center justify-center bg-slate-50 text-slate-500 rounded-full hover:bg-primary hover:text-white transition-all duration-300 shadow-sm hover:shadow-lg hover:scale-105 border border-slate-100"><i class="fas fa-microphone text-lg"></i></button>
                            <button onclick="document.getElementById('input-text').value=''" class="text-xs font-semibold text-slate-400 hover:text-red-500 uppercase tracking-wide">Clear Text</button>
                        </div>
                    </div>
                    <!-- Output Area -->
                    <div class="p-6 md:p-8 bg-slate-50/50 flex flex-col relative">
                        <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-slate-200 to-transparent opacity-50"></div>
                        <div id="output-text" class="flex-1 text-2xl font-medium text-slate-800 leading-relaxed overflow-y-auto flex items-center justify-center text-center">
                            <div class="text-slate-300 flex flex-col items-center">
                                <div class="bg-white p-4 rounded-full shadow-sm mb-3">
                                    <i class="fas fa-magic text-2xl text-slate-200"></i>
                                </div>
                                <span class="text-sm font-medium">Translation will appear here</span>
                            </div>
                        </div>
                        <div class="flex justify-end mt-6">
                            <button onclick="speakOutput()" class="w-12 h-12 flex items-center justify-center bg-white text-slate-600 rounded-full hover:text-primary hover:border-primary transition-all duration-300 shadow-md border border-slate-100 hover:-translate-y-1"><i class="fas fa-volume-up text-lg"></i></button>
                        </div>
                    </div>
                </div>
                <div class="p-6 bg-white border-t border-slate-100 flex flex-col items-center gap-6 shadow-[0_-10px_40px_rgba(0,0,0,0.02)] z-10">
                    <button onclick="handleTranslate()" class="bg-gradient-to-r from-orange-600 to-orange-500 hover:from-orange-700 hover:to-orange-600 text-white font-bold py-4 px-12 rounded-2xl shadow-lg shadow-orange-500/30 transform active:scale-95 transition-all duration-300 flex items-center gap-3 text-lg">
                        <span>Translate Now</span> <i class="fas fa-arrow-right"></i>
                    </button>
                    <div class="w-full">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 ml-1">Quick Phrases</h3>
                        <div class="flex flex-wrap gap-3" id="quick-phrases"></div>
                    </div>
                </div>
            </div>

            <!-- CHATBOT VIEW -->
            <div id="view-chatbot" class="flex-1 flex flex-col hidden bg-slate-50">
                <div id="chat-history" class="flex-1 overflow-y-auto p-6 space-y-6">
                    <div class="flex justify-center mb-4"><span class="text-xs font-medium text-slate-400 bg-slate-100 px-3 py-1 rounded-full">Today</span></div>
                    <div class="flex justify-start">
                        <div class="flex items-end gap-2 max-w-[85%]">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex-shrink-0 flex items-center justify-center text-white text-xs shadow-md"><i class="fas fa-robot"></i></div>
                            <div class="bg-white text-slate-700 px-5 py-3.5 rounded-2xl rounded-bl-none shadow-sm border border-slate-100 text-sm leading-relaxed">
                                Namaste! I am Sahayak. I can help you with loans, KCC schemes, and farming subsidies. How can I help today?
                            </div>
                        </div>
                    </div>
                </div>
                <div class="p-4 bg-white border-t border-slate-100">
                    <div class="flex gap-3 mb-3 overflow-x-auto no-scrollbar pb-1">
                        <button onclick="setChat('I need a loan')" class="whitespace-nowrap px-4 py-1.5 bg-slate-50 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-100 border border-slate-200 rounded-full text-xs font-medium text-slate-600 transition">ðŸ’° I need a loan</button>
                        <button onclick="setChat('Government schemes')" class="whitespace-nowrap px-4 py-1.5 bg-slate-50 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-100 border border-slate-200 rounded-full text-xs font-medium text-slate-600 transition">ðŸ“œ Schemes</button>
                        <button onclick="setChat('Subsidy for seeds')" class="whitespace-nowrap px-4 py-1.5 bg-slate-50 hover:bg-orange-50 hover:text-orange-600 hover:border-orange-100 border border-slate-200 rounded-full text-xs font-medium text-slate-600 transition">ðŸŒ± Seed Subsidy</button>
                    </div>
                    <div class="flex gap-2 items-center bg-slate-50 p-2 rounded-[1.5rem] border border-slate-200 focus-within:ring-2 focus-within:ring-orange-100 focus-within:border-orange-300 transition-all">
                        <button id="mic-chatbot" onclick="startVoiceChat()" class="w-10 h-10 bg-white text-slate-500 rounded-full hover:text-primary transition shadow-sm flex items-center justify-center"><i class="fas fa-microphone"></i></button>
                        <input type="text" id="chat-input" placeholder="Type your question..." class="flex-1 bg-transparent border-none focus:ring-0 text-slate-700 placeholder-slate-400 px-2" onkeydown="if(event.key === 'Enter') handleChat()">
                        <button onclick="handleChat()" class="w-10 h-10 bg-primary text-white rounded-full hover:bg-orange-700 transition shadow-md flex items-center justify-center"><i class="fas fa-paper-plane text-sm"></i></button>
                    </div>
                </div>
            </div>

            <!-- BLOG VIEW -->
            <div id="view-blog" class="flex-1 overflow-y-auto p-6 md:p-8 bg-slate-50 hidden">
                <div class="flex justify-between items-end mb-8">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-800">Financial Literacy</h2>
                        <p class="text-slate-500 text-sm mt-1">Simple guides for better money management.</p>
                    </div>
                    <div class="bg-white p-2 rounded-lg shadow-sm border border-slate-100"><i class="fas fa-filter text-slate-400"></i></div>
                </div>
                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Blog Posts -->
                    <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden hover:shadow-lg transition-all duration-300 group">
                        <div class="h-40 bg-orange-100 overflow-hidden relative">
                            <img src="https://images.unsplash.com/photo-1595245842247-5c5cb634351b?q=80&w=600&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" alt="Farmer">
                            <div class="absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-orange-600 shadow-sm">Loans</div>
                        </div>
                        <div class="p-5">
                            <h3 class="font-bold text-lg text-slate-800 mb-2 leading-tight group-hover:text-primary transition">Understanding Kisan Credit Card</h3>
                            <p class="text-slate-500 text-sm leading-relaxed mb-4 line-clamp-2">KCC offers loans to farmers at a very low interest rate of 7%. Repay on time to get 3% extra subsidy.</p>
                            <div class="flex items-center justify-between border-t border-slate-50 pt-4">
                                <button onclick="toggleLike(this)" class="flex items-center gap-1.5 text-slate-400 hover:text-red-500 text-sm transition font-medium"><i class="far fa-heart"></i> <span>Like</span></button>
                                <div class="flex items-center gap-2 text-sm">
                                    <button class="text-slate-400 hover:text-primary"><i class="fas fa-share-alt"></i></button>
                                    <button class="text-slate-400 hover:text-primary"><i class="far fa-bookmark"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden hover:shadow-lg transition-all duration-300 group">
                        <div class="h-40 bg-blue-100 overflow-hidden relative">
                            <img src="https://images.unsplash.com/photo-1563013544-824ae1b704d3?q=80&w=600&auto=format&fit=crop" class="w-full h-full object-cover group-hover:scale-105 transition duration-500" alt="Money">
                            <div class="absolute top-4 left-4 bg-white/90 backdrop-blur-sm px-3 py-1 rounded-full text-xs font-bold text-blue-600 shadow-sm">Security</div>
                        </div>
                        <div class="p-5">
                            <h3 class="font-bold text-lg text-slate-800 mb-2 leading-tight group-hover:text-primary transition">Beware of Mobile Scams</h3>
                            <p class="text-slate-500 text-sm leading-relaxed mb-4 line-clamp-2">Bank officers never ask for your PIN or OTP. Never share your password with anyone on phone calls.</p>
                            <div class="flex items-center justify-between border-t border-slate-50 pt-4">
                                <button onclick="toggleLike(this)" class="flex items-center gap-1.5 text-slate-400 hover:text-red-500 text-sm transition font-medium"><i class="far fa-heart"></i> <span>Like</span></button>
                                <div class="flex items-center gap-2 text-sm">
                                    <button class="text-slate-400 hover:text-primary"><i class="fas fa-share-alt"></i></button>
                                    <button class="text-slate-400 hover:text-primary"><i class="far fa-bookmark"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- LEDGER VIEW (New with Income) -->
            <div id="view-ledger" class="flex-1 flex flex-col hidden bg-slate-50">
                <!-- Ledger Header/Stats -->
                <div class="p-6 md:p-8 bg-white border-b border-slate-100">
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="bg-green-50 p-4 rounded-2xl border border-green-100">
                            <p class="text-xs text-green-600 font-bold uppercase tracking-wider mb-1">Income</p>
                            <h3 class="text-xl font-bold text-slate-800">â‚¹ <span id="ledger-income">0</span></h3>
                        </div>
                        <div class="bg-red-50 p-4 rounded-2xl border border-red-100">
                            <p class="text-xs text-red-500 font-bold uppercase tracking-wider mb-1">Expense</p>
                            <h3 class="text-xl font-bold text-slate-800">â‚¹ <span id="ledger-expense">0</span></h3>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-2xl border border-blue-100">
                            <p class="text-xs text-blue-600 font-bold uppercase tracking-wider mb-1">Balance</p>
                            <h3 class="text-xl font-bold text-slate-800">â‚¹ <span id="ledger-balance">0</span></h3>
                        </div>
                    </div>

                    <!-- Add Form -->
                    <div class="flex gap-3 items-center bg-slate-50 p-2 rounded-2xl border border-slate-200">
                        <select id="transaction-type" class="bg-transparent text-sm font-bold text-slate-600 focus:outline-none cursor-pointer pl-2">
                            <option value="expense">ðŸ”´ Expense</option>
                            <option value="income">ðŸŸ¢ Income</option>
                        </select>
                        <div class="h-6 w-px bg-slate-300"></div>
                        <input type="text" id="trans-item" placeholder="Item (e.g. Sold Wheat)" class="flex-[2] bg-transparent border-none focus:ring-0 text-slate-700 placeholder-slate-400 px-2">
                        <input type="number" id="trans-amount" placeholder="â‚¹ Amount" class="flex-1 bg-transparent border-l border-slate-200 focus:ring-0 text-slate-700 placeholder-slate-400 px-4">
                        <button onclick="addTransaction()" class="bg-primary hover:bg-orange-700 text-white px-6 py-2.5 rounded-xl font-bold transition shadow-md">Add</button>
                    </div>
                </div>

                <!-- Ledger List -->
                <div class="flex-1 overflow-y-auto p-6 md:p-8">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4">Recent Transactions</h3>
                    <div id="ledger-list" class="space-y-3">
                        <!-- Items will be populated here -->
                        <div class="text-center text-slate-400 py-10">No transactions yet.</div>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Login Modal -->
    <div class="modal fixed inset-0 flex justify-center items-center opacity-0 pointer-events-none transition-opacity duration-300" id="loginModal">
        <div class="bg-white p-8 rounded-3xl w-96 text-center transform scale-95 transition-transform duration-300 relative shadow-2xl border border-slate-100">
            <button class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 text-slate-400 hover:bg-red-50 hover:text-red-500 transition" onclick="toggleModal('loginModal')">
                <i class="fas fa-times"></i>
            </button>
            <div class="w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4 text-primary text-2xl">
                <i class="fas fa-user-lock"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2 text-slate-800">Welcome Back</h2>
            <p class="text-slate-500 text-sm mb-6">Login to access your financial dashboard.</p>
            
            <div class="space-y-3">
                <input type="text" placeholder="Phone Number / Aadhaar" class="w-full p-4 border border-slate-200 rounded-xl bg-slate-50 focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-400 transition text-sm font-medium">
                <input type="password" placeholder="4-Digit PIN" class="w-full p-4 border border-slate-200 rounded-xl bg-slate-50 focus:outline-none focus:ring-2 focus:ring-orange-100 focus:border-orange-400 transition text-sm font-medium">
            </div>
            
            <button onclick="toggleModal('loginModal'); launchApp('translator')" class="w-full py-4 bg-gradient-to-r from-orange-600 to-orange-500 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-orange-500/30 transition-all duration-300 mt-6 text-sm tracking-wide uppercase">
                Secure Login
            </button>
            <p class="mt-6 text-xs text-slate-400">Don't have an account? <a href="#" class="text-primary font-bold hover:underline">Register</a></p>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // =================================================================
        //  STEP 1: PASTE YOUR GOOGLE GEMINI API KEY BELOW (INSIDE QUOTES)
        // =================================================================
        const apiKey = ""; 
        // =================================================================

        const LANGUAGE_DATA = {
            haryanvi: {
                name: "Haryanvi", color: "orange", voice: "hi-IN", prompt: "Haryanvi (Desi dialect)",
                dictionary: { "i": "manne", "my": "mhara", "money": "pisa", "loan": "karza", "bank": "bank", "interest": "byaaj", "scheme": "skeem", "farmer": "kisaan" },
                phrases: ["Money for seeds", "Where is the bank?", "Interest rate", "Government scheme"]
            },
            bhojpuri: {
                name: "Bhojpuri", color: "purple", voice: "hi-IN", prompt: "Bhojpuri language",
                dictionary: { "i": "ham", "my": "hamar", "money": "paisa", "loan": "karja", "bank": "bank", "interest": "sud", "scheme": "yojna", "farmer": "kisan" },
                phrases: ["Biya khatir paisa", "Bank kaha ba?", "Byaaj dar", "Sarkari yojna"]
            },
            tamil: {
                name: "Tamil", color: "rose", voice: "ta-IN", prompt: "Tamil language",
                dictionary: { "i": "naan", "money": "panam", "loan": "kadan", "bank": "vanki", "interest": "vatti", "scheme": "thittam", "farmer": "vivasaayi" },
                phrases: ["Vithaigalukku panam", "Vanki enge?", "Vatti vigitham", "Arasu thittam"]
            }
        };

        const OFFLINE_RESPONSES = {
            default: "Offline Mode: Contact bank manager for details.",
            keywords: { "loan": "KCC loan is best (7% interest).", "kcc": "Kisan Credit Card gives loans at low interest.", "bank": "Bank opens at 10 AM. Carry Aadhaar." }
        };

        let activeLang = 'haryanvi';
        let direction = 'eng-to-target';
        let currentText = "";
        
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        let recognition = null;
        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
        }

        // --- UI FUNCTIONS ---
        function showLanding() {
            document.getElementById('landing-page').style.display = 'flex';
            document.getElementById('app-interface').classList.add('hidden');
            window.scrollTo(0, 0);
            updateStatus();
        }

        function launchApp(mode) {
            document.getElementById('landing-page').style.display = 'none';
            document.getElementById('app-interface').classList.remove('hidden');
            switchTab(mode);
            updateUI();
            updateStatus();
            if(mode === 'ledger') renderLedger();
        }

        function toggleModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal.classList.contains('opacity-0')) {
                modal.classList.remove('opacity-0', 'pointer-events-none');
                modal.querySelector('div').classList.remove('scale-95');
                modal.querySelector('div').classList.add('scale-100');
            } else {
                modal.classList.add('opacity-0', 'pointer-events-none');
                modal.querySelector('div').classList.remove('scale-100');
                modal.querySelector('div').classList.add('scale-95');
            }
        }

        function updateStatus() {
            const statusEl = document.getElementById('ai-status');
            const dot = statusEl.previousElementSibling;
            if(apiKey && apiKey.length > 5) {
                statusEl.innerText = "Online (AI Active)";
                statusEl.classList.remove('text-red-200');
                dot.classList.remove('bg-red-400');
                dot.classList.add('bg-green-400');
            } else {
                statusEl.innerText = "Offline Mode";
                statusEl.classList.add('text-red-200');
                dot.classList.remove('bg-green-400');
                dot.classList.add('bg-red-400');
            }
        }

        function switchTab(mode) {
            const tabs = ['translator', 'chatbot', 'blog', 'ledger'];
            tabs.forEach(t => {
                const view = document.getElementById(`view-${t}`);
                if (t === mode) view.classList.remove('hidden');
                else view.classList.add('hidden');
            });
        }

        function changeLanguage() {
            activeLang = document.getElementById('language-select').value;
            updateUI();
        }

        function updateUI() {
            const data = LANGUAGE_DATA[activeLang];
            document.getElementById('label-target').innerText = data.name;
            
            const phraseContainer = document.getElementById('quick-phrases');
            phraseContainer.innerHTML = '';
            data.phrases.forEach(p => {
                const btn = document.createElement('button');
                btn.className = "px-4 py-2 bg-slate-50 hover:bg-orange-50 border border-slate-100 hover:border-orange-200 rounded-xl text-sm font-medium text-slate-600 transition shadow-sm";
                btn.innerText = p;
                btn.onclick = () => { document.getElementById('input-text').value = p; };
                phraseContainer.appendChild(btn);
            });
        }

        function toggleDirection() {
            direction = direction === 'eng-to-target' ? 'target-to-eng' : 'eng-to-target';
            const s = document.getElementById('label-source');
            const t = document.getElementById('label-target');
            const tempText = s.innerText;
            const tempClass = s.className;
            
            s.innerText = t.innerText;
            s.className = t.className;
            t.innerText = tempText;
            t.className = tempClass;
            
            document.getElementById('input-text').value = '';
            document.getElementById('output-text').innerHTML = `
            <div class="text-slate-300 flex flex-col items-center">
                <div class="bg-white p-4 rounded-full shadow-sm mb-3">
                    <i class="fas fa-magic text-2xl text-slate-200"></i>
                </div>
                <span class="text-sm font-medium">Translation will appear here</span>
            </div>`;
        }

        function toggleLike(btn) {
            const icon = btn.querySelector('i');
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas', 'text-red-500');
                btn.classList.add('text-red-500');
            } else {
                icon.classList.remove('fas', 'text-red-500');
                icon.classList.add('far');
                btn.classList.remove('text-red-500');
            }
        }

        // --- LEDGER LOGIC ---
        function getLedgerData() {
            return JSON.parse(localStorage.getItem('gramin_ledger_data')) || [];
        }

        function saveLedgerData(data) {
            localStorage.setItem('gramin_ledger_data', JSON.stringify(data));
            renderLedger();
        }

        function addTransaction() {
            const type = document.getElementById('transaction-type').value;
            const itemInput = document.getElementById('trans-item');
            const amountInput = document.getElementById('trans-amount');
            const item = itemInput.value.trim();
            const amount = parseFloat(amountInput.value);

            if (item && amount) {
                const data = getLedgerData();
                data.unshift({
                    id: Date.now(),
                    type: type, // 'income' or 'expense'
                    item: item,
                    amount: amount,
                    date: new Date().toLocaleDateString()
                });
                saveLedgerData(data);
                itemInput.value = '';
                amountInput.value = '';
            }
        }

        function deleteExpense(id) {
            const data = getLedgerData();
            const newData = data.filter(entry => entry.id !== id);
            saveLedgerData(newData);
        }

        function renderLedger() {
            const data = getLedgerData();
            const listEl = document.getElementById('ledger-list');
            const incEl = document.getElementById('ledger-income');
            const expEl = document.getElementById('ledger-expense');
            const balEl = document.getElementById('ledger-balance');
            
            let totalIncome = 0;
            let totalExpense = 0;
            listEl.innerHTML = '';

            if (data.length === 0) {
                listEl.innerHTML = '<div class="text-center text-slate-400 py-10 flex flex-col items-center"><div class="bg-slate-50 p-4 rounded-full mb-3"><i class="fas fa-clipboard-list text-2xl text-slate-300"></i></div><span>No transactions yet.</span></div>';
            } else {
                data.forEach(entry => {
                    if(entry.type === 'income') totalIncome += entry.amount;
                    else totalExpense += entry.amount;

                    const isIncome = entry.type === 'income';
                    const el = document.createElement('div');
                    el.className = 'bg-white p-4 rounded-xl border border-slate-100 flex justify-between items-center shadow-sm hover:shadow-md transition';
                    el.innerHTML = `
                        <div class="flex items-center gap-3">
                            <div class="w-10 h-10 rounded-full flex items-center justify-center ${isIncome ? 'bg-green-100 text-green-600' : 'bg-red-100 text-red-500'}">
                                <i class="fas ${isIncome ? 'fa-arrow-down' : 'fa-arrow-up'}"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-slate-700">${entry.item}</h4>
                                <p class="text-xs text-slate-400 capitalize">${entry.date} â€¢ ${entry.type}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <span class="font-bold ${isIncome ? 'text-green-600' : 'text-red-500'}">${isIncome ? '+' : '-'} â‚¹${entry.amount}</span>
                            <button onclick="deleteExpense(${entry.id})" class="text-slate-300 hover:text-red-500 transition"><i class="fas fa-trash-alt"></i></button>
                        </div>
                    `;
                    listEl.appendChild(el);
                });
            }
            
            incEl.innerText = totalIncome;
            expEl.innerText = totalExpense;
            balEl.innerText = totalIncome - totalExpense;
        }

        // --- VOICE & LOGIC ---
        function startVoiceTranslation() {
            if (!recognition) { alert("Voice not supported."); return; }
            const isEnglish = direction === 'eng-to-target';
            recognition.lang = isEnglish ? 'en-US' : LANGUAGE_DATA[activeLang].voice;
            const btn = document.getElementById('mic-translator');
            btn.classList.add('mic-active');
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('input-text').value = transcript;
                btn.classList.remove('mic-active');
                handleTranslate();
            };
            recognition.onend = function() { btn.classList.remove('mic-active'); };
            recognition.start();
        }

        function startVoiceChat() {
            if (!recognition) { alert("Voice not supported."); return; }
            recognition.lang = 'en-US'; 
            const btn = document.getElementById('mic-chatbot');
            btn.classList.add('mic-active');
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                document.getElementById('chat-input').value = transcript;
                btn.classList.remove('mic-active');
                handleChat();
            };
            recognition.onend = function() { btn.classList.remove('mic-active'); };
            recognition.start();
        }

        async function handleTranslate() {
            const text = document.getElementById('input-text').value.trim();
            if(!text) return;
            const outputDiv = document.getElementById('output-text');
            outputDiv.innerHTML = '<div class="flex flex-col items-center"><i class="fas fa-spinner fa-spin text-3xl text-primary mb-2"></i><span class="text-sm text-slate-400">Translating...</span></div>';

            const source = direction === 'eng-to-target' ? 'English' : LANGUAGE_DATA[activeLang].prompt;
            const target = direction === 'eng-to-target' ? LANGUAGE_DATA[activeLang].prompt : 'English';

            try {
                if(!apiKey) throw new Error("No API Key");
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: `Translate "${text}" from ${source} to ${target}. Output ONLY translated text.` }] }] })
                });
                const data = await response.json();
                if(data.error) throw new Error(data.error.message);
                currentText = data.candidates[0].content.parts[0].text;
                outputDiv.innerText = currentText;
            } catch (e) {
                // Offline Logic
                let res = text;
                const dict = LANGUAGE_DATA[activeLang].dictionary;
                Object.keys(dict).forEach(k => {
                    if(text.toLowerCase().includes(k)) res = res.replace(new RegExp(k, 'gi'), dict[k]);
                });
                if(res === text) res = "Translation unavailable offline.";
                currentText = res;
                outputDiv.innerText = res + " (Offline)";
            }
        }

        function setChat(txt) { document.getElementById('chat-input').value = txt; }

        async function handleChat() {
            const input = document.getElementById('chat-input');
            const text = input.value.trim();
            if(!text) return;
            
            const history = document.getElementById('chat-history');
            
            // User Msg
            history.innerHTML += `
            <div class="flex justify-end">
                <div class="bg-primary text-white px-5 py-3.5 rounded-2xl rounded-br-none shadow-md text-sm leading-relaxed max-w-[85%]">
                    ${text}
                </div>
            </div>`;
            input.value = '';
            history.scrollTop = history.scrollHeight;

            // Bot Response
            try {
                let botText = "";
                if(!apiKey) throw new Error("No API Key");
                const systemPrompt = `You are 'Sahayak', a helpful rural financial assistant. Answer in ${LANGUAGE_DATA[activeLang].prompt}. Keep it short. User: ${text}`;
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: systemPrompt }] }] })
                });
                const data = await response.json();
                botText = data.candidates[0].content.parts[0].text;

                history.innerHTML += `
                <div class="flex justify-start">
                    <div class="flex items-end gap-2 max-w-[85%]">
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex-shrink-0 flex items-center justify-center text-white text-xs shadow-md"><i class="fas fa-robot"></i></div>
                        <div class="bg-white text-slate-700 px-5 py-3.5 rounded-2xl rounded-bl-none shadow-sm border border-slate-100 text-sm leading-relaxed">
                            ${botText} <br>
                            <button onclick="speakText('${botText.replace(/'/g, "\\'")}')" class="mt-2 text-xs text-primary font-bold hover:text-orange-700 flex items-center gap-1"><i class="fas fa-volume-up"></i> Listen</button>
                        </div>
                    </div>
                </div>`;
            } catch(e) {
                // Offline fallback
                let reply = OFFLINE_RESPONSES.default;
                const lowerText = text.toLowerCase();
                for (const [key, value] of Object.entries(OFFLINE_RESPONSES.keywords)) {
                    if (lowerText.includes(key)) { reply = value; break; }
                }
                history.innerHTML += `
                <div class="flex justify-start">
                    <div class="flex items-end gap-2 max-w-[85%]">
                        <div class="w-8 h-8 rounded-full bg-slate-400 flex-shrink-0 flex items-center justify-center text-white text-xs shadow-md"><i class="fas fa-wifi-slash"></i></div>
                        <div class="bg-white text-slate-700 px-5 py-3.5 rounded-2xl rounded-bl-none shadow-sm border border-slate-100 text-sm leading-relaxed">
                            ${reply} (Offline)
                        </div>
                    </div>
                </div>`;
            }
            history.scrollTop = history.scrollHeight;
        }

        function speakOutput() { if(currentText) speakText(currentText); }
        function speakText(txt) {
            const u = new SpeechSynthesisUtterance(txt);
            u.lang = direction === 'eng-to-target' ? LANGUAGE_DATA[activeLang].voice : 'en-US';
            window.speechSynthesis.speak(u);
        }

        updateUI();
        updateStatus();
    </script>
</body>
</html>